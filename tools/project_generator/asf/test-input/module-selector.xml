<asf xmlversion="1.0">
<documentation baseurl="http://dummy/"/>

<device-map id="map.atmel">
	<group name="avr">
		<group name="xmega">
			<group name="xmegaa">
				<group name="xmegaa1">
					<mcu name="atxmega128a1"/>
				</group>
			</group>
		</group>
		<group name="uc3">
			<group name="ucr2">
				<group name="uc3a">
					<group name="uc3a0">
						<mcu name="at32uc3a0512"/>
					</group>
				</group>
			</group>
		</group>
	</group>
</device-map>

<project id="project" caption="my project">
	<require idref="testdev" />
	<require idref="board" />
</project>

<board id="board" mcu="atxmega128a1" caption="my board">
</board>

<!--- Select by device -->

<module type="meta" id="testdev" caption="meta">
	<require idref="devselect1" />
</module>

<select-by-device id="devselect1" caption="Device selector">
	<module type="driver" id="devselect1#ucr2" caption="devsel for uc3">
		<build type="header-file" value="uc3.h"/>
		<device-support value="ucr2" />
	</module>

	<module type="driver" id="devselect1#xmegaa" caption="devsel for xmega">
		<build type="header-file" value="xmega.h"/>
		<device-support value="xmegaa" />
	</module>
</select-by-device>

<!--- Select by config -->

<module type="meta" id="testconf" caption="meta">
	<require idref="devselect1" />
</module>


<select-by-config id="confselect1" name="config.selection" caption="Config selector">
	<module type="driver" id="confselect1#speed" caption="confsel1">
		<build type="header-file" value="speed.h"/>
		<device-support value="ucr2" />
	</module>

	<module type="driver" id="confselect1#size" caption="confsel2">
		<build type="header-file" value="size.h"/>
		<device-support value="xmegaa" />
	</module>
</select-by-config>

<select-by-config id="confselect2" name="config.selection" default="speed" caption="Config selector">
	<module type="driver" id="confselect2#speed" caption="confsel1">
		<build type="header-file" value="speed.h"/>
		<device-support value="ucr2" />
	</module>

	<module type="driver" id="confselect2#size" caption="confsel2">
		<build type="header-file" value="size.h"/>
		<device-support value="xmegaa" />
	</module>
</select-by-config>


<!--- Select by config and device combined-->

<project id="project_confdevselect1" caption="my project">
	<require idref="confdevselect1" />
	<require idref="board" />
</project>

<module type="meta" id="testconfdev" caption="meta">
	<require idref="confdevselect1" />
</module>

<select-by-config id="confdevselect1" name="config.selection" caption="Config selector" default="option2">

	<select-by-device id="confdevselect1#option1" caption="Device selector">
		<module type="driver" id="confdevselect1#option1#1" caption="devsel for uc3">
			<build type="header-file" value="option1_uc3.h"/>
			<build type="define" name="definename" value="define11"/>
			<info type="appnote" value="avr11" />
			<info type="keyword" value="category">
				<keyword value="test11-1"/>
				<keyword value="test11-2"/>
			</info>
			<device-support value="ucr2" />
		</module>

		<module type="driver" id="confdevselect1#option1#2" caption="devsel for xmega">
			<build type="header-file" value="option1_xmega.h"/>
			<build type="define" name="definename" value="define12"/>
			<info type="appnote" value="avr12" />
			<info type="keyword" value="category">
				<keyword value="test12-1"/>
				<keyword value="test12-2"/>
			</info>
			<device-support value="xmegaa" />
		</module>
	</select-by-device>

	<select-by-device id="confdevselect1#option2" caption="Device selector">
		<module type="driver" id="confdevselect1#option2#1" caption="devsel for uc3">
			<build type="header-file" value="option2_uc3.h"/>
			<build type="define" name="definename" value="define21"/>
			<info type="appnote" value="avr21" />
			<info type="keyword" value="category">
				<keyword value="test21-1"/>
				<keyword value="test21-2"/>
			</info>
			<device-support value="ucr2" />
		</module>

		<module type="driver" id="confdevselect1#option2#3" caption="devsel for xmega">
			<build type="header-file" value="option2_xmega.h"/>
			<build type="define" name="definename" value="define22"/>
			<info type="appnote" value="avr22" />
			<info type="keyword" value="category">
				<keyword value="test22-1"/>
				<keyword value="test22-2"/>
			</info>
			<device-support value="xmegaa" />
		</module>
	</select-by-device>

</select-by-config>


<!--- Select by config and project configuration -->

<project id="project_conf_default" caption="my project">
	<config name="mydefault" value="expected" />
	<require idref="confdef1" />
	<require idref="board" />
</project>

<select-by-config id="confdef1" name="mydefault" default="default" caption="Config selector">
	<module type="driver" id="confdef1#default" caption="confsel1">
		<build type="header-file" value="default.h"/>
		<device-support value="ucr2" />
	</module>

	<module type="driver" id="confdef1#expected" caption="confsel2">
		<build type="header-file" value="expected.h"/>
		<device-support value="xmegaa" />
	</module>
</select-by-config>


</asf>
